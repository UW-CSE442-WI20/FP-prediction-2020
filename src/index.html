<!DOCTYPE html>

<html>
<head>
	<meta charset="UTF-8">
	<title>Prediction 2020</title>
	<link rel="stylesheet" type="text/css" href="./index.css"/>
</head>
<body>
	<div id="graphic">
		<div id="sections">
			<section class="step">
				<br><br><br><br><br><br><br>With the 2020 presidential election looming, many of us are naturally curious what the next 4 years will look like. Will we have 4 more years of Donald Trump, or will there be a change of leadership? <br><br> We've got you covered. Keep scrolling to see our analysis of the 2020 election cycle and our predictions for what the next 4 years have in store.<br><br>Click on a state to dive down and learn more about how each county voted.
			</section>
			<section class="step">
				First let's take a moment to look back at the past few presidential election cycles.<br><br>
				<div class="title">2000</div>
				<b>Bush vs. Gore</b><br><br>2000 saw the eldest son of former President George H.W. Bush take on Vice President Al Gore. After 8 years under the leadership of Bill Clinton, and after Clinton's impeachment in his second term as president, the nation was ready for a change. A total of 11 states flipped from democrat to republican in 2000, and although Gore won the popular vote, Bush won the most electoral votes, becoming the 43rd President of the United States in one of the closest elections in US history.
			</section>
			<section class="step">
				<div class="title">2004</div>
				<b>Bush vs. Kerry</b><br>9 months into George W. Bush's tenure the 9/11 attacks rattled the nation, and less than a month later the US invaded Afghanistan, beginning the longest war in US history. While the country remained at War, as change in leadership was not favorable, and while New Hamsphire flipped democrat in 2004, Iowa and New Mexico flipped republican, solidifying Bush's lead over US Senator John Kerry.
			</section>
			<section class="step">
				<div class="title">2008</div>
				<b>Obama vs. McCain</b><br>While the war in Afghanistan may have brought about some national unity in 2004, by 2008 with little progress to show the nation was hungry for change. The up and coming junior US Senator Barack Obama took on senior US senator John McCain and took the nation by storm. 9 states flipped democrat in 2008, and Barack Obama became the first African American president in US history.
			</section>
			<section class="step">
				<div class="title">2012</div>
				<b>Obama vs. Romney</b><br>The stock market crash of 2008-2009 had a devastating effect on the US economy, and although its roots preceded Obama's presidency, it did manage to temper some of the excitement that permeated the 2008 election. Obama secured a 2nd term, but by a smaller margin, with Indiana and North Carolina flipping republican in favor of former Governer of Massachusetts, Mitt Romney.
			</section>
			<section class="step">
				<div class="title">2016</div>
				<b>Trump vs. Clinton</b><br>2016 brought us the race of former first lady, US Senator, Secretary of State, and first female presidential candidate Hillary Clinton, and US businessman Donald J. Trump. The race was full of controversies, around Trumps past behavior and antics, the Russian hack of the Democratic National Committee servers. Amidst the chaos a total of 6 states flipped republican, and while Clinton won the popular vote by an even greater margin than Gore in 2000, the electoral votes were in Trump's favor and Donald J. Trump became the 45th president of the United States.
			</section>
			<section class="step">
				<div class="title">2016 Swing States</div>
				As we look ahead at the 2020 election cycle, lets take a closer look at the states that flipped republican in 2016.<br><br>
				<b>Florida<br>Iowa<br>Michigan<br>Ohio<br>Pennsylvania<br>Wisconsin</b>
			</section>
			<section class="step">
				<div class="title">2020</div>
				<b>Trump vs. Biden/Sanders</b><br>The democratic primaries have narrowed the initial field of over 20 candidates down to former Vice President Joseph Biden and US Senator and 2016 democratic hopeful Bernie Sanders. For each of 2016 swing states we will explore polling numbers for <b>Biden vs. Sanders</b>, <b>Biden vs. Trump</b>, and <b>Sanders vs. Trump</b>.
			</section>
			<section class="step">
				<div class="title">Florida</div>
				<br>The latest polls show that Biden is more popular with Florida voters than Sanders, with a particular spike in favorability in recent weeks, but neither Biden or Sanders are leading Trump in the polls.<br><br> Click the buttons below to explore the polling numbers for each pairing.<br><br>
				<div id="buttons">
					<button id="fl_biden_sanders" class="button">Biden vs. Sanders</button><br>
					<button id="fl_biden_trump" class="button">Biden vs. Trump</button><br>
					<button id="fl_sanders_trump" class="button">Sanders vs. Trump</button>
				</div>
			</section>
			<section class="step">
				<div class="title">Iowa</div>
				<br>The race between Biden and Sanders in Iowa is closer than in Florida, but the most recent polling numbers show Sanders taking the lead. Trump is still leading both democratic hopefuls in Iowa polls, though by a smaller margin with Biden.<br><br>
				<div id="buttons">
					<button id="io_biden_sanders" class="button">Biden vs. Sanders</button><br>
					<button id="io_biden_trump" class="button">Biden vs. Trump</button><br>
					<button id="io_sanders_trump" class="button">Sanders vs. Trump</button>
				</div>
			</section>
			<section class="step">
				<div class="title">Michigan</div>
				<br>Biden is leading Sanders in Michigan polls. There was a brief swap between the two candidates following Sanders early successes in the Democratic primaries, but as Biden's campaign has strengthened, he has once again edged out Sanders. Interestingly, while the most recent poll shows Trump leading Biden, the same poll shows Sanders leading Trump.<br><br>
				<div id="buttons">
					<button id="mi_biden_sanders" class="button">Biden vs. Sanders</button><br>
					<button id="mi_biden_trump" class="button">Biden vs. Trump</button><br>
					<button id="mi_sanders_trump" class="button">Sanders vs. Trump</button>
				</div>
			</section>
			<section class="step">
				<div class="title">Ohio</div>
				<br>Biden is proved more favorable than Sanders across the board in the Ohio polls, and while Biden appears to be leading Trump, the results are less clear with Sanders, who is in a deadlock with Trump in the most recent polls.<br><br>
				<div id="buttons">
					<button id="oh_biden_sanders" class="button">Biden vs. Sanders</button><br>
					<button id="oh_biden_trump" class="button">Biden vs. Trump</button><br>
					<button id="oh_sanders_trump" class="button">Sanders vs. Trump</button>
				</div>
			</section>
			<section class="step">
				<div class="title">Pennsylvania</div>
				<br>Biden has been leading Sanders in Pennsylvania for nearly a year, but the most recent polls show a shift in favorability, with Sanders narrowly beating out Biden. Both Biden and Sanders are leading Trump in the polls, with Biden's polling numbers showing that lead more consistently.<br><br>
				<div id="buttons">
					<button id="pa_biden_sanders" class="button">Biden vs. Sanders</button><br>
					<button id="pa_biden_trump" class="button">Biden vs. Trump</button><br>
					<button id="pa_sanders_trump" class="button">Sanders vs. Trump</button>
				</div>
			</section>
			<section class="step">
				<div class="title">Wisconsin</div>
				<br>Wisconsin's polling numbers show all of the candidates flipping in favorability over time, but Sanders is currently leading Biden. Both Biden and Sanders are leading Trump, but the margins are narrow and appear to be changing all the time.<br><br>
				<div id="buttons">
					<button id="wi_biden_sanders" class="button">Biden vs. Sanders</button><br>
					<button id="wi_biden_trump" class="button">Biden vs. Trump</button><br>
					<button id="wi_sanders_trump" class="button">Sanders vs. Trump</button>
				</div>
			</section>
			<section class="step">
				With this information in mind, let's make some predictions...
			</section>
			<section class="step">
				Following Bill Clinton's impeachment in his second turn, there was a shift in the 2000 election and more than 11 states flipped republican in that election cycle. <br><br>Trump was impeached in his first term and if reelected in 2020 would be the first president to be reelected to office following impeachment.
			</section>
			<section class="step">
				The stock market crash of 2008-2009 soured national favorability of Barack Obama despite its roots preceding his presidency. <br><br>The recent stock market crash due to the Corona Virus, as well as the president's response to the Corona Virus itself, may sour his national favorability leading up to the 2020 election.
			</section>
			<section class="step">
				With these factors and the current polling numbers in mind, let's do some math.<br><br>If all other states stay the same and Ohio, Pennsylvania, and Wisconsin all flip democrat this cycle as the current polling numbers indicate they could, the democratic candidate would win 275 electoral votes, putting them above the threshold of 270 needed to win the election...
			</section>
			<section class="step">
				While polling numbers have proved unreliable many times in the past, we're gonna go out on a limb as make a prediction.
			</section>
			<section class="step">
				<br><br><br><br><br><br>
			</section>
			<section class="step">
				<div class="title">References</div>
				Election data from MIT Election Lab<br>
        Polling data from FiveThirtyEight<br>
        <a href="https://bl.ocks.org/larsenmtl/e3b8b7c2ca4787f77d78f58d41c3da91">Linechart code based off code by larsenmtl</a>
        
			</section>
		</div>
		<div id="vis">
		</div>
		<div id="extra-space">
		</div>
	</div>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.7.0/d3.min.js"></script>
	<script type="text/javascript" src="https://d3js.org/topojson.v3.min.js"></script>
	<script src="https://d3js.org/d3-time-format.v2.min.js"></script>
	<script src="./index.js" charset="utf-8"></script>
</body>
</html>








<!-- POLLING LINE CHART DATA -->
<!-- Data is from fivethirtyeight -->
<!-- Taken from https://bl.ocks.org/larsenmtl/e3b8b7c2ca4787f77d78f58d41c3da91 -->
<!--
 <!DOCTYPE html>
<html>

<head>
  <script data-require="d3@3.5.3" data-semver="3.5.3" src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.js"></script>
  <style>
    body {
      font: 10px sans-serif;
    }
    
    .axis path,
    .axis line {
      fill: none;
      stroke: #000;
      shape-rendering: crispEdges;
    }
    
    .x.axis path {
      display: none;
    }
    
    .line {
      fill: none;
      stroke: steelblue;
      stroke-width: 1.5px;
    }
  </style>
</head>

<body>
  <script>
var flData = "date	Sanders	Biden\n\
20190304	8.0	18.5\n\
20190321	13.0	37.0\n\
20190508	16.0	39.0\n\
20190519	11.6	39.2\n\
20190529	18.3	34.4\n\
20190611	16.0	32.0\n\
20190617	17.0	37.0\n\
20190623	8.0	47.4\n\
20190915	14.4	34.0\n\
20190918	8.0	34.666666666666664\n\
20191026	13.0	27.0\n\
20200112	15.5	41.5\n\
20200123	19.0	35.0\n\
20200128	9.4	41.3\n\
20200213	10.4	25.9\n\
20200218	13.0	20.0\n\
20200219	11.4	26.5\n\
20200221	18.0	22.0\n\
20200222	16.7	24.6\n\
20200226	13.0	33.8\n\
20200304	11.9	61.2\n\
";


var ohData = "date	Sanders	Biden\n\
20190529	18.7	28.5\n\
20190722	14.0	31.0\n\
20191002	26.6	29.2\n\
20191007	13.0	32.0\n\
20200120	20.8	32.1\n\
";


var iaData = "date	Sanders	Biden\n\
20181211	13.0	30.0\n\
20181213	19.0	32.0\n\
20181217	20.0	20.0\n\
20190202	12.59	27.295\n\
20190306	25.0	27.0\n\
20190315	15.0	29.0\n\
20190324	20.55	25.15\n\
20190409	16.0	27.0\n\
20190418	19.0	19.0\n\
20190502	13.7	34.9\n\
20190519	24.0	24.0\n\
20190605	16.0	24.0\n\
20190612	22.0	30.0\n\
20190620	18.0	27.0\n\
20190701	10.5	20.5\n\
20190704	16.0	16.0\n\
20190718	19.0	24.0\n\
20190725	10.9	22.9\n\
20190804	9.0	28.0\n\
20190811	17.0	17.0\n\
20190904	26.0	29.0\n\
20190916	9.0	25.0\n\
20190917	16.0	16.0\n\
20190918	11.0	20.0\n\
20191010	5.0	21.5\n\
20191011	21.0	22.0\n\
20191016	12.5	22.8\n\
20191018	9.0	17.6\n\
20191022	18.0	12.0\n\
20191030	19.0	17.0\n\
20191105	17.0	15.0\n\
20191106	14.0	13.0\n\
20191110	18.1	15.3\n\
20191111	13.0	19.0\n\
20191113	18.5	18.5\n\
20191119	18.0	12.0\n\
20191210	21.7	23.3\n\
20191216	21.0	15.0\n\
20200103	23.0	23.0\n\
20200108	20.0	15.0\n\
20200112	21.0	26.0\n\
20200117	10.3	23.3\n\
20200118	14.0	24.0\n\
20200121	24.0	17.0\n\
20200123	24.0	21.0\n\
20200126	26.35	21.575\n\
20200127	23.0	22.25\n\
20200128	18.0	20.0\n\
20200129	28.0	15.0\n\
20200130	26.666666666666668	26.0\n\
20200202	24.75	19.5\n\
";


var miData = "date	Sanders	Biden\n\
20190310	23.3	39.6\n\
20190510	16.0	37.0\n\
20190529	18.3	27.3\n\
20190717	16.0	35.0\n\
20190924	12.0	27.0\n\
20191015	15.0	19.0\n\
20191025	17.0	30.0\n\
20191103	27.6	33.5\n\
20200120	21.6	27.0\n\
20200220	25.0	16.0\n\
20200302	22.5	29.2\n\
";


var paData = "date	Sanders	Biden\n\
20190328	20.4	39.0\n\
20190410	16.0	28.0\n\
20190514	13.0	39.0\n\
20190529	14.9	46.0\n\
20190804	12.0	28.0\n\
20191006	6.0	17.0\n\
20191015	14.0	27.0\n\
20191025	14.0	28.0\n\
20191027	12.0	30.0\n\
20200120	20.5	31.3\n\
20200126	15.0	22.0\n\
20200220	25.0	20.0\n\
";


var wiData = "date	Sanders	Biden\n\
20190317	38.9	23.5\n\
20190418	20.0	24.0\n\
20190529	13.1	28.3\n\
20190704	19.0	18.0\n\
20190811	24.0	20.0\n\
20190829	20.0	28.0\n\
20191002	21.0	19.5\n\
20191015	10.0	17.0\n\
20191017	17.0	31.0\n\
20191026	20.0	23.0\n\
20191117	17.0	30.0\n\
20191208	19.0	23.0\n\
20200108	21.0	23.0\n\
20200112	19.0	23.0\n\
20200120	28.4	21.8\n\
20200220	29.8	12.9\n\
20200223	29.0	15.0\n\
";

var LEGEND_LOCATION = -90; // the x coordinate of the legend

var data = d3.tsv.parse(miData);

    var margin = {
        top: 20,
        right: 80,
        bottom: 30,
        left: 50
      },
      width = 900 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom;

    var parseDate = d3.time.format("%Y%m%d").parse;

    var x = d3.time.scale()
      .range([0, width]);

    var y = d3.scale.linear()
      .range([height, 0]);

	var color = d3.scale.category10()
	.range(['#00AA61', '#7E50DB']); // COLORS: sanders then biden

    var xAxis = d3.svg.axis()
      .scale(x)
      .orient("bottom");

    var yAxis = d3.svg.axis()
      .scale(y)
      .orient("left");

    var line = d3.svg.line()
      .interpolate("basis")
      .x(function(d) {
        return x(d.date);
      })
      .y(function(d) {
        return y(d.temperature);
      });

    var svg = d3.select("body").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    

    color.domain(d3.keys(data[0]).filter(function(key) {
      return key !== "date";
    }));

    data.forEach(function(d) {
      d.date = parseDate(d.date);
    });

    var cities = color.domain().map(function(name) {
      return {
        name: name,
        values: data.map(function(d) {
          return {
            date: d.date,
            temperature: +d[name]
          };
        })
      };
    });

    x.domain(d3.extent(data, function(d) {
      return d.date;
    }));

    y.domain([
      d3.min(cities, function(c) {
        return d3.min(c.values, function(v) {
          return v.temperature;
        });
      }),
      d3.max(cities, function(c) {
        return d3.max(c.values, function(v) {
          return v.temperature;
        });
      })
    ]);

    var legend = svg.selectAll('g')
      .data(cities)
      .enter()
      .append('g')
      .attr('class', 'legend');

    legend.append('rect')
      .attr('x', width + LEGEND_LOCATION)
      .attr('y', function(d, i) {
        return i * 20;
      })
      .attr('width', 10)
      .attr('height', 10)
      .style('fill', function(d) {
        return color(d.name);
      });

    legend.append('text')
      .attr('x', width  + (LEGEND_LOCATION + 15))
      .attr('y', function(d, i) {
        return (i * 20) + 9;
      })
      .text(function(d) {
        return d.name;
      });

    svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

    svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Polling Percent");

    var city = svg.selectAll(".city")
      .data(cities)
      .enter().append("g")
      .attr("class", "city");

    city.append("path")
      .attr("class", "line")
      .attr("d", function(d) {
        return line(d.values);
      })
      .style("stroke", function(d) {
        return color(d.name);
      });

    city.append("text")
      .datum(function(d) {
        return {
          name: d.name,
          value: d.values[d.values.length - 1]
        };
      })
      .attr("transform", function(d) {
        return "translate(" + x(d.value.date) + "," + y(d.value.temperature) + ")";
      })
      .attr("x", 3)
      .attr("dy", ".35em")
      .text(function(d) {
        return d.name;
      });

    var mouseG = svg.append("g")
      .attr("class", "mouse-over-effects");

    mouseG.append("path") // this is the black vertical line to follow mouse
      .attr("class", "mouse-line")
      .style("stroke", "black")
      .style("stroke-width", "1px")
      .style("opacity", "0");
      
    var lines = document.getElementsByClassName('line');

    var mousePerLine = mouseG.selectAll('.mouse-per-line')
      .data(cities)
      .enter()
      .append("g")
      .attr("class", "mouse-per-line");

    mousePerLine.append("circle")
      .attr("r", 7)
      .style("stroke", function(d) {
        return color(d.name);
      })
      .style("fill", "none")
      .style("stroke-width", "1px")
      .style("opacity", "0");

    mousePerLine.append("text")
      .attr("transform", "translate(10,3)");

    mouseG.append('svg:rect') // append a rect to catch mouse movements on canvas
      .attr('width', width) // can't catch mouse events on a g element
      .attr('height', height)
      .attr('fill', 'none')
      .attr('pointer-events', 'all')
      .on('mouseout', function() { // on mouse out hide line, circles and text
        d3.select(".mouse-line")
          .style("opacity", "0");
        d3.selectAll(".mouse-per-line circle")
          .style("opacity", "0");
        d3.selectAll(".mouse-per-line text")
          .style("opacity", "0");
      })
      .on('mouseover', function() { // on mouse in show line, circles and text
        d3.select(".mouse-line")
          .style("opacity", "1");
        d3.selectAll(".mouse-per-line circle")
          .style("opacity", "1");
        d3.selectAll(".mouse-per-line text")
          .style("opacity", "1");
      })
      .on('mousemove', function() { // mouse moving over canvas
        var mouse = d3.mouse(this);
        d3.select(".mouse-line")
          .attr("d", function() {
            var d = "M" + mouse[0] + "," + height;
            d += " " + mouse[0] + "," + 0;
            return d;
          });

        d3.selectAll(".mouse-per-line")
          .attr("transform", function(d, i) {
            console.log(width/mouse[0])
            var xDate = x.invert(mouse[0]),
                bisect = d3.bisector(function(d) { return d.date; }).right;
                idx = bisect(d.values, xDate);
            
            var beginning = 0,
                end = lines[i].getTotalLength(),
                target = null;

            while (true){
              target = Math.floor((beginning + end) / 2);
              pos = lines[i].getPointAtLength(target);
              if ((target === end || target === beginning) && pos.x !== mouse[0]) {
                  break;
              }
              if (pos.x > mouse[0])      end = target;
              else if (pos.x < mouse[0]) beginning = target;
              else break; //position found
            }
            
            d3.select(this).select('text')
              .text(y.invert(pos.y).toFixed(2));
              
            return "translate(" + mouse[0] + "," + pos.y +")";
          });
      });
      
  </script>
</body>

</html> 
-->

